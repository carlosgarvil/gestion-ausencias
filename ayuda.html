<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <title>Gestión de ausencias - IES Polígono Sur</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
  <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png" />
  <link rel="shortcut icon" href="img/favicon.ico" />
  <meta name="msapplication-TileColor" content="#2b5797" />
  <meta name="msapplication-TileImage" content="img/android-chrome-192x192.png" />
  <meta name="theme-color" content="#ffffff" />
</head>

<body>
  <div id="app">
    <h1>Gestión de ausencias del profesorado</h1>

    <section id="login-section" v-if="!isLoggedIn">
      <h2>Acceso</h2>
      <form @submit.prevent="handleLogin">
        <label>
          Correo
          <input type="email" v-model="loginForm.email" required />
        </label>
        <label>
          Contraseña
          <input type="password" v-model="loginForm.password" required />
        </label>
        <button type="submit">Entrar</button>
        <div v-if="loginMessage" class="message" :class="loginMessageType">{{ loginMessage }}</div>
      </form>
    </section>

    <section id="app-section" v-else>
      <header class="app-header">
        <div class="header-left">
          <span class="session-text">
            Sesión iniciada como <strong>{{ userEmail }}</strong>
          </span>
        </div>
        <button id="btn-logout" type="button" class="btn-logout" @click="handleLogout">Cerrar sesión</button>
      </header>
      <nav class="top-nav">
        <a class="nav-link" href="index.html">Ausencias</a>
        <a class="nav-link" href="panel.html">Panel</a>
        <a class="nav-link" href="tareas.html">Tareas</a>
        <a class="nav-link" href="justificaciones.html">Gestión de Justificantes</a>
        <a class="nav-link" href="profesorado.html">Horario del Profesorado</a>
        <a class="nav-link" href="gestion_profesorado.html">Añadir/quitar profesorado</a>
        <a class="nav-link" href="permisos.html">Permisos P27</a>
        <a class="nav-link" href="control-presencia.html">Control de presencia</a>
        <a class="nav-link active" href="ayuda.html">Ayuda</a>
      </nav>

      <section id="help-section">
        <h2>Ayuda y buenas prácticas</h2>
        <article class="help-block">
          <h3>Cuándo registrar una ausencia</h3>
          <ul>
            <li>Usa el formulario de “Registro de ausencias” para comunicar ausencias planificadas o sobrevenidas.</li>
            <li>Para ausencias de varios días, utiliza los campos <strong>Fecha desde</strong> y <strong>Fecha
                hasta</strong>. El sistema genera un registro diario.</li>
            <li>Completa los tramos horarios afectados. Puedes modificarlos posteriormente desde la lista de ausencias.
            </li>
            <li>Las ausencias se guardan automáticamente cuando el profesorado rellena el formulario de Google
              Classroom; por tanto pueden aparecer registradas sin intervención manual en esta aplicación.</li>
            <li>Por defecto, las ausencias creadas se marcan como ausencia de día completo (tramos
              <strong>1-14</strong>). Si el profesor se reincorpora durante la jornada, edita los tramos de esa ausencia
              para eliminar los tramos ya cubiertos y evitar que siga apareciendo en el panel.
            </li>
            <li>El panel muestra exactamente la información que se visualiza en la TV de la Sala del Profesorado:
              cualquier cambio en los tramos en este sistema se reflejará en dicha TV tras actualizar el panel.</li>
          </ul>
        </article>

        <article class="help-block">
          <h3>Consulta de ausencias por fecha</h3>
          <ul>
            <li>Selecciona un día en “Ausencias del día” y pulsa <strong>Actualizar</strong> para ver los registros
              ordenados por docente.</li>
            <li>Pulsa sobre una ausencia para editar los tramos y usa el botón rojo para eliminarla si ha sido un error.
            </li>
            <li>La información sensible (motivos) nunca aparece en los paneles públicos, solo en esta vista protegida.
            </li>
          </ul>
        </article>

        <article class="help-block">
          <h3>Gestión de sustituciones</h3>
          <ul>
            <li>Desde la pestaña “Sustituciones” puedes crear un nuevo profesor copiando el horario completo de un
              titular.</li>
            <li>El nuevo docente necesita un nombre (Apellidos, Nombre) y un correo @iespoligonosur.org.</li>
            <li>Al realizar la copia, se duplican todas las entradas del horario del titular para el nuevo docente.</li>
            <li>El nuevo profesor aparecerá automáticamente en los selectores de la aplicación para registrar sus
              propias ausencias.</li>
          </ul>
        </article>

        <article class="help-block">
          <h3>Seguridad y acceso</h3>
          <ul>
            <li>El acceso se realiza mediante Supabase Auth. No compartas tu cuenta.</li>
            <li>Las tablas `teachers`, `absences` y el horario están protegidos con RLS en Supabase para evitar accesos
              no autorizados.</li>
            <li>El panel público solo expone la información imprescindible para la organización diaria.</li>
          </ul>
        </article>
      </section>
    </section>
  </div>

  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="script.js"></script>
</body>

</html>




